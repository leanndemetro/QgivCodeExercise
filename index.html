<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="stylesheet" href="./style.css">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0" />
  <title>Code exercise - Qgiv</title>
  <!-- Added link to the fa library -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <!-- Added link to the jQuery library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

  <!-- Added a link to Bootstrap-->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <!-- Added a link to fonts.google-->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500;100&display=swap" rel="stylesheet">
</head>

<body>
  <div class="container">
    <div class="widget">
      <img src="https://i.imgur.com/EYFhJuS.png?1" alt="waterProject" class="widget-logo">
      <div class="widget-body">
        <p class="widget-text">
          The Water Project -
          Global Water Initiative
        </p>
        <span id="widget-thermometer">
          <p id="widget-total-funds">

          </p>
          <div class="container">
            <div class="row">
              <div class="col">
                <p class="widget-raised">
                  0%
                </p>
              </div>
              <div class="col">
                <p class="widget-raised">
                  RAISED
                </p>
              </div>
              <div class="col">
                <p class="widget-raised">
                  100%
                </p>
              </div>
            </div>
          </div>
          <div class="widget-fundsCounter"></div>
          <div class="widget-fundsCounter-overlay"></div>
        </span>
        <input value="Give Now!" type="submit" id="widget-submit">
        <input type="submit" id="widget-input-submit-hidden">
      </div>

    </div>
  </div>

  <script type="text/javascript">

    init();

    function init() {
      // create a method to parse out the local storage item called totalRaised
      var displayedRaised = localStorage.getItem("totalRaised");
      //append it to the widget-total-funds element (with a dollar sign)
      if (displayedRaised !== null) {
        $("#widget-total-funds").text("$" + displayedRaised);
      }
    };

    $(document).ready(function () {

      $("#widget-submit").on("click", function () {
        //hide widget-thermometer
        $("#widget-thermometer").hide();
        //change submit type to input with an id of widget-input and a placeholder of Enter Amount ($)
        $("#widget-submit").replaceWith('<input type="input" placeholder="Enter Amount ($)" id="widget-input">');
        //create a submit button that appears beneath the input with the id of widget-input-submit
        $("#widget-input-submit-hidden").replaceWith('<input value="Donate!" type="submit" id="widget-input-submit">');

        //create an onclick event that takes in the entered value and console logs it, and sets a local storage item called donateAmount to it's value
        $("#widget-input-submit").click(function () {
          localStorage.setItem("donateAmount", $("#widget-input").val())

          //parse out the totalRaised local storage item value, set it equal to a variable
          let Raised = localStorage.getItem("totalRaised");
          //parse out the donateAmount local storage item value, set it equal to a variable
          let Donation = localStorage.getItem("donateAmount");
          //create a math function that adds the two together
          newTotal = parseInt(Raised) + parseInt(Donation);
          console.log(newTotal);

          //set the totalRaised local storage item to the new total value (comment out while in development)
          // localStorage.setItem("totalRaised", newTotal);

          //replace the widget-input-submit element to a thank you/success message with a class name of success-message
          $("#widget-input-submit").replaceWith('<p class="success-message"> Success! We thank you for your contribution</p>');
          //hide the widget-input
          $("#widget-input").hide();
          //show the widget-thermometer span
          $("#widget-thermometer").show();
          //if newTotal is less than 2000
          if (newTotal < 2000) {
            //replace the widget-fundsCounter-overlay with a new element called widget-overlay-partial
            $(".widget-fundsCounter-overlay").replaceWith('<div class="widget-overlay-partial"></div>');
            //if newTotal is equal to 2000 
          } else if (newTotal += 2000) {
            //replace the widget-fundsCounter-overlay with a new element with a width of 100% of the thermometer
            $(".widget-fundsCounter-overlay").replaceWith('<div class="widget-overlay-complete"></div>');
          }




          
          //append a hard coded $ before the donation input area

        });
      });


    });

  </script>

</body>

</html>