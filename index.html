<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="stylesheet" href="./style.css">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0" />
  <title>Code exercise - Qgiv</title>
  <!-- Added link to the fa library -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <!-- Added link to the jQuery library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

  <!-- Added a link to Bootstrap-->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <!-- Added a link to fonts.google-->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500;100&display=swap" rel="stylesheet">
</head>

<body>
  <div class="container">
    <div class="widget">
      <img src="https://i.imgur.com/EYFhJuS.png?1" alt="waterProject" class="widget-logo">
      <div class="widget-body">
        <p class="widget-text">
          The Water Project -
          Global Water Initiative
        </p>
        <span id="widget-thermometer">
          <p id="widget-total-funds">

          </p>
          <div class="container">
            <div class="row">
              <div class="col">
                <p class="widget-raised">
                  0%
                </p>
              </div>
              <div class="col">
                <p class="widget-raised">
                  RAISED
                </p>
              </div>
              <div class="col">
                <p class="widget-raised">
                  100%
                </p>
              </div>
            </div>
          </div>
          <div class="widget-fundsCounter"></div>
          <div class="widget-fundsCounter-overlay"></div>
        </span>
        <input value="Give Now!" type="submit" id="widget-submit">
        <input type="submit" id="widget-input-submit-hidden">
      </div>

    </div>
  </div>

  <script type="text/javascript">

    init();

    function init() {
      // create a method to parse out the local storage item called totalRaised
      var displayedRaised = localStorage.getItem("totalRaised");
      //append it to the widget-total-funds element (with a dollar sign)
      if (displayedRaised !== null) {
        $("#widget-total-funds").text("$" + displayedRaised);
      }
    };

    $(document).ready(function () {

      $("#widget-submit").on("click", function () {
        //hide widget-thermometer
        $("#widget-thermometer").hide();
        //change submit type to input with an id of widget-input and a placeholder of Enter Amount ($)
        $("#widget-submit").replaceWith('<input type="input" placeholder="Enter Amount ($)" id="widget-input">');
        //create a submit button that appears beneath the input with the id of widget-input-submit
        $("#widget-input-submit-hidden").replaceWith('<input value="Donate!" type="submit" id="widget-input-submit">');

        //create an onclick event that takes in the entered value and console logs it, and sets a local storage item called donateAmount to it's value
        $("#widget-input-submit").click(function () {
          localStorage.setItem("donateAmount", $("#widget-input").val())

          //parse out the totalRaised local storage item value, set it equal to a variable
          let Raised = localStorage.getItem("totalRaised");
          //parse out the donateAmount local storage item value, set it equal to a variable
          let Donation = localStorage.getItem("donateAmount");
          //create a math function that adds the two together
          newTotal = parseInt(Raised) + parseInt(Donation);
          console.log(newTotal);
          //set the totalRaised local storage item to the new total value
          localStorage.setItem("totalRaised", newTotal);
          //create a function that takes in the new totalRaised and updates the widget-thermometer widget-total-funds value to the new totalRaised value (appends it)
          //write jquery to replace the widget-input element with the widget-thermometer span,
          //create a function that replaces or changes the widget-fundsCounter-overlay element's width depending on the number's position in relativity to the total goal
          //change the widget-submit area to a thank you/success message

        });
      });


    });

  </script>

</body>

</html>